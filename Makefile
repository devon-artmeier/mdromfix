# ------------------------------------------------------------------------------
# Commands
# ------------------------------------------------------------------------------

ifeq ($(OS),Windows_NT)
RMDIR                := rmdir /s /q
else
RMDIR                := rm -rf
endif

# ------------------------------------------------------------------------------
# Paths
# ------------------------------------------------------------------------------

OUT_PATH             := out

OUT_PATH_EXISTS      := $(wildcard $(OUT_PATH))

# ------------------------------------------------------------------------------
# Reserved rules
# ------------------------------------------------------------------------------

.PHONY: all install clean

# ------------------------------------------------------------------------------
# Make all
# ------------------------------------------------------------------------------

all:
ifeq ($(OUT_PATH_EXISTS),)
	@cmake -S . -B $(OUT_PATH)
endif
	@cmake --build $(OUT_PATH) --config Release

# ------------------------------------------------------------------------------
# Install
# ------------------------------------------------------------------------------

install:
	@cmake --install $(OUT_PATH) --config Release

# ------------------------------------------------------------------------------
# Clean
# ------------------------------------------------------------------------------

clean:
ifneq ($(OUT_PATH_EXISTS),)
	@$(RMDIR) "$(OUT_PATH)"
endif

# ------------------------------------------------------------------------------